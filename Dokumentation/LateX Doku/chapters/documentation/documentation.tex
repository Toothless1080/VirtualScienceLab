% !TeX root = ../../pythonTutorial.tex

\chapter{Dokumentation}
\label{documentation:sec:Dokumentation}

Wie in allen Programmiersprachen ist vor allem bei großen Programmen eine gute Dokumentation wichtig.
Viele Funktionen sind ohne ausreichende Beschreibungen nicht gut nachvollziehbar und man kann oft nur erahnen, was ein bestimmter Programmteil letztendlich bewirkt.
Da von vielen Programmierern aus Bequemlichkeit und Schreibfaulheit auf eine umfassende Dokumentation verzichtet wird, sind viele Programme kaum bis überhaupt nicht wartbar oder veränderbar.

In Python gibt es für genau dieses Problem Tools, mit dessen Hilfe die Dokumentation von Programmen auf ein angenehmes Maß reduziert wird.
Eines dieser plattformunabhängigen Werkzeuge mit dem Namen \textit{epydoc} wird im Folgenden genauer betrachtet.
\randnotiz{epydoc} epydoc analysiert Python-Programme anhand des Quellcodes, verwertet diesen und gibt anschließend eine Dokumentation als PDF- oder HTML-Datei aus.
Bei dieser Analyse werden Doc- strings benötigt, deren Benutzung und Einbindung noch genauer betrachtet wird.

Unter \url{http://epydoc.sourceforge.net} können Sie sich die aktuelle epydoc-Version herunterladen und anschließend installieren.


\section{Epydoc}
\label{documentation:sec:epydoc}

Nach der erfolgreichen Installation kann epydoc über die Konsole aufgerufen werden.
Dazu wird der Befehl \textit{epydoc.py} benutzt. (in Linux ohne .py)
Eine Dokumentation zu einer bestimmten Python-Datei ist dann möglich, wenn epydoc an der selben Stelle im Dateipfad ausgeführt wird.

Um das Format zwischen PDF und HTML zu wechseln, wird der Befehl \textit{--pdf} beziehungsweise \textit{--html} verwendet.
Auch den Speicherort der Dokumentation kann frei variiert werden.
Dazu wird der Befehl \textit{--output} vor den gewünschten Verzeichnisort geschrieben.

Ein Beispiel für eine korrekte Dokumentationserstellung durch epydoc sieht wie folgt aus:
\begin{lstlisting}[label=documentation:lst:epydocbsp]
$ epydoc.py --html --output eigenes_verzeichnis testprogramm
\end{lstlisting}
Dadurch wird die Dokumentation zum Modul \textit{testprogramm} als HTML-Datei im Verzeichnis \textit{gewuenschtesverzeichnis} gespeichert.


\section{Docstrings}
\label{documentation:sec:docstrings}

Python bietet uns durch drei einfache oder doppelte Anführungszeichen die Möglichkeit, sogenannte Blockkommentare über mehrere Zeilen zu verfassen.
Der darin eingefasste Text wird als Documentation String, kurz \textit{Docstring} bezeichnet.

\begin{lstlisting}[label=documentation:lst:docstringbsp]
"""
Dieser Text ist ein Docstring.
Er wird von epydoc als solcher erkannt,
analysiert und interpretiert.
"""
\end{lstlisting}

Docstrings sollten zur Beschreibung aller Programmierteile benutzt werden, vor allem Funktionen und Klassen sollten durchgehend kommentiert werden.

\begin{lstlisting}[label=documentation:lst:docstringbsp2]
class myclass(object):
   """Docstring zur Klasse myclass
   Beschreibung, wozu die Klasse dient.
   """

def myfunction():
   """Docstring zur Funktion myfunction
   Beschreibung, was die Funktion macht.
   """
\end{lstlisting}

Innerhalb des Programms kann man durch einen Befehl einen beliebigen Docstring aufrufen.
Dazu dient das Attribut \_doc\_, das zu jeder Instanz automatisch erstellt wird.

\begin{lstlisting}[label=documentation:lst:docstringausgeben]
>>> print myclass.__doc__
Docstring zur Klasse myclass
   Beschreibung, wozu die Klasse dient.
\end{lstlisting}


Python hat intern jedoch keine Möglichkeit, um für Variablen Docstrings zu nutzen.
Diese Möglichkeit wird durch epydoc ermöglicht.
Folgt in der folgenden Zeile nach einer Variablenzuweisung ein Blockkommentar, wird dieser automatisch als Docstring zur Variablen interpretiert.
Eine weitere Möglichkeit ist es, den Docstring vor die Wertezuweisung der Variablen zu definieren.
In diesem Fall wird auf die dreifachen Anführungszeichen verzichtet und je Zeile eine Raute mit Doppelpunkt \#: vorangestellt.

\begin{lstlisting}[label=documentation:lst:docstringepydoc]
a = 42
""" Die Variable a ist 42
"""

#: Die Variable b
#: ist 24
b = 24
\end{lstlisting}


\section{Epytext}
\label{documentation:sec:Epytext}
Um sicherzustellen, dass epydoc die Docstrings richtig interpretiert, wurde die Beschreibungssprache Epytext eingeführt.
Darin sind Regeln für die Formatierung und die Umsetzung mit Docstrings festgehalten, um eine einheitliche Benutzung zu gewährleisten.
Im Folgenden werden einige der Regeln und Möglichkeiten betrachtet.

Zum einen ist in Epytext, genau wie in Python die korrekte Einrückung von entscheidender Wichtigkeit.

\begin{lstlisting}[label=documentation:lst:einrueckung]
def myfunction():
   """
   Wichtig ist die richtige Einrückung
   """
\end{lstlisting}

Auch Listen sind innerhalb von Docstrings möglich.
Diese können als einfache Auflistung oder  Nummerierung benutzt werden.
\begin{lstlisting}[label=documentation:lst:liste]
"""
Auflistung:
- Eier
- Milch
- Mehl

Nummerierung:
1. Aufstehen
2. Zähne putzen
3. Duschen
"""
\end{lstlisting}

Weitere Formatierungsmöglichkeiten werden kurz in folgendem Beispiel gezeigt.
Der Aufbau ist dabei stets in der Form eines Großbuchstabens mit dem zu formatierenden Strings in geschweiften Klammern \textit{x{*}}.

\begin{lstlisting}[label=documentation:lst:liste]
"""
I{Dieser String ist kursiv}
F{Dieser String ist fett}
M{Dies ist ein mathematischer Ausdruck}
U{String ist eine URL und wird als Hyperlink interpretiert}
E{Verhindert die Interpretation}
"""
\end{lstlisting}

\section{Zusammenfassung}
\label{documentation:sec:zusammenfassung}
Vielen Programmierern ist die ständige Dokumentation seit jeher ein Dorn im Auge.
Mit epydoc ist in der Python-Programmierung jedoch ein Tool vorhanden, welche einem die Arbeit zu einem gewissen Teil abnimmt.
Deshalb sollte dieses oder ein ähnliches Programm verwendet werden, um sicherzustellen, dass auch nach der Fertigstellung des Programms nachvollziehbar wird, was der eigentliche Sinn und Zweck hinter den einzelnen Programmteilen ist.
Falls Sie sich nach diesem Grundüberblick noch weiter über epydoc und Epytext informieren möchten, können Sie sich die Dokumentation auf der offiziellen Homepage von epydoc anschauen.

Diese finden Sie unter \url{http//epydoc.sourceforge.net}. 